const{exec}=require("child_process"),path=require("path"),fs=require("fs"),appPath=path.join(__dirname,"../../frontend/src/apps/home"),configPath=path.join(appPath,"src/slax-config.json");function parse(){return JSON.parse(fs.readFileSync(configPath,"utf8"))}function writeConfig(e,t){let a=parse(),n=a.routes[e.name];n&&(n.data={name:t,navName:e.title},e.hide&&(n.hide=!0),"sub"===e.type&&(n.sub=!0)),fs.writeFileSync(configPath,JSON.stringify(a))}module.exports={add:function(e){let t=e.name,a=e.pathto;var n;e.parentName&&(t=e.parentName+"-"+t),n=e,exec("sjs routes add "+appPath+" "+t+":"+a,(e,a,o)=>{a?(console.log(`stdout: ${a}`),writeConfig(n,t)):console.log(`stderr: ${o}`)})},update:function(e){let t=e.name;e.parentName&&(t=e.parentName+"-"+t),writeConfig(e,t)},remove:function(e){let t=e.name;"sub"===e.type&&(t=e.parentName+"-"+t),exec("sjs routes remove "+appPath+" "+t,(e,t,a)=>{console.log(`stdout: ${t}`),console.log(`stderr: ${a}`)})},parse};