"use strict";var shortid=require("shortid"),pluralize=require("pluralize");function getRemovable(e){var r=this,i=[];return r.each(e,function(t,a){r.each(t,function(t){r.each(t,function(n,u){if(/Id$/.test(u)){var s=pluralize.plural(u.slice(0,-2));if(e[s]){var d=r.getById(e[s],n);r.isUndefined(d)&&i.push({name:a,id:t.id})}}})})}),i}function createId(e){var r=this,i=r.__id();if(r.isEmpty(e))return 1;var t=r(e).maxBy(i)[i];return r.isFinite(t)?++t:shortid.generate()}function deepQuery(e,r){var i=this;if(e&&r)if(i.isArray(e)){for(var t=0;t<e.length;t++)if(i.deepQuery(e[t],r))return!0}else if(i.isObject(e)&&!i.isArray(e)){for(var a in e)if(i.deepQuery(e[a],r))return!0}else if(-1!==e.toString().toLowerCase().indexOf(r))return!0}module.exports={getRemovable,createId,deepQuery};