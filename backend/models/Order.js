"use strict";const Model=require("./_Base").Model,path=require("path"),_=require("lodash"),fs=require("fs");exports.Order=class e extends Model{static list(e="updatedAt",r="asc"){return Model.list("orders",e,r)}static withUser(e){if(!e)return e;let r=Model.findBy("users",{id:e.userId});return r?(e.company=r.company,e):e}static findBy(r){let t=Model.findBy("orders",r);return t?e.withUser(t):null}static getReations(r){let t=Model.findBy("orders",{id:r}),i=Model.findBy("users",{id:t.userId});return{order:e.withUser(t),user:i,installation:t.installation,inspection:t.inspection}}static findAll(e){return Model.findAll("orders",e)}static findByReg(e){return Model.findByReg("orders",e)}static where(e,r,t){return Model.where("orders",e,r,t)}static format(r,t){return r.map(function(r){return e.withUser(r)})}static create(r){return r.uuid=Model.guid(),r.pickTime=new Date,e.withUser(Model.create("orders",r))}static update(r){return e.withUser(Model.update("orders","id",r))}static delete(e){return Model.delete("orders",e)}};