"use strict";const Model=require("./_Base").Model,bcrypt=require("bcryptjs"),path=require("path"),fs=require("fs");exports.User=class e extends Model{static list(e="username"){return Model.list("users",e)}static userList(){return Model.list("users").filter(function(e){return!e.isAdmin})}static format(e,r){return r?e.map(function(e){let s={};return r.forEach(function(r){s[r]=e[r]}),s}):e.map(function(e){return{id:e.id}})}static findBy(e){return Model.findBy("users",e)}static findOrCreate(e,r="username"){return e.password&&(e.password=bcrypt.hashSync(e.password,8)),Model.findOrCreate("users",r,e)}static create(e){return e.password&&(e.password=bcrypt.hashSync(e.password,8)),e.role=1,e.isAdmin=!1,e.isActive=!1,Model.create("users",e)}static update(e){return e.password&&(e.password=bcrypt.hashSync(e.password,8)),e.isActive="true"==e.isActive||1==e.isActive,Model.update("users","id",e)}static delay(r,s){let t=e.findBy({username:"delay"});if(s)return t;e.update({isActive:"true",id:t.id,delayed:r})}static delete(e){return Model.delete("users",e)}};